@using ASP.NET_OLX.Services.Interfaces
@inject IConfiguration Configuration
@inject IFavouriteService favouriteService
@model AdvertDto
@{
    string url = new Uri($"{Context.Request.Scheme}://{Context.Request.Host}/{Configuration["UserImgDir"]}/").AbsoluteUri;
}

<a asp-action="Index" class="mb-3 btn btn-info">Повернутися</a>
<div class="d-flex gap-3">

    <div class="w-70 d-flex flex-column gap-3 ">
        <div id="carousel" class="border rounded-3 p-1 carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                @for (int i = 0; i < ViewBag.Images.Length; i++)
                {
                    <button class=@(@i == 0 ? "active" : "") type="button" data-bs-target="#carousel" data-bs-slide-to=@i aria-label=$"Slide {@i}"></button>
                }
            </div>
            <div class="carousel-inner">
                @for (int i = 0; i < ViewBag.Images.Length; i++)
                {
                    <div class="b-gray carousel-item @(@i == 0 ? "active" : "") ">
                        <img src=@(url + ViewBag.Images[@i].Name) class="d-block  m-auto" style="height:60vh;">
                    </div>
                }
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <div class="border rounded-3 p-3">
            <h5>Опис</h5>
            <p class="lh-base">@Model.Description</p>
        </div>
    </div>
    <div class="w-30 d-flex flex-column gap-3 ">
        <div class="border rounded-3 p-3">
            <div class="d-flex justify-content-between">
                <h3 class="fs-6 text-muted">@Model.Date.ToShortDateString()</h3>
                <div onclick="setFavourite(@Model.Id)" id="@Model.Id" class="cur-pointer  material-icons d-block">@(favouriteService.IsFavourite(@Model.Id) ? "favorite" : "favorite_border")</div>
            </div>
            <h5>@Model.Title</h5>
            <h5>@Model.Price гр.</h5>
        </div>
        <div class="border rounded-3 p-3">
            <h5>Користувач</h5>
            <p>@Model.SellerName</p>
            <p>@Model.CityName</p>
        </div>
    </div>
</div>
